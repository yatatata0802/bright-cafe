<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>喫茶ブライト</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Noto+Serif+JP:wght@700&family=Montserrat:wght@700&family=Kiwi+Maru:wght@700&family=Noto+Sans+JP:wght@400;700&family=Yuji+Syuku&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="style.css" />
  </head>

  <body>
    <canvas id="particles-bg"></canvas>

    <div class="hero">
      <video autoplay loop muted playsinline class="hero-video">
        <source src="coffee-drip.mp4" type="video/mp4" />
      </video>
      <div class="overlay"></div>
      <button class="menu-btn" id="menuBtn">
        <span class="icon">☕</span>
        <span class="label">MENU</span>
      </button>
      <div class="title-area">
        <div class="main-title" data-text="喫茶ブライト">
          <span class="char">喫</span>
          <span class="char">茶</span>
          <span class="char">ブ</span>
          <span class="char">ラ</span>
          <span class="char">イ</span>
          <span class="char">ト</span>
        </div>
        <div class="catchcopy">昭和から続く<br />心温まる純喫茶</div>
      </div>
    </div>

    <!-- メニューモーダル -->
    <div class="menu-modal" id="menuModal">
      <div class="menu-modal-content">
        <button class="menu-modal-close" id="menuModalClose">×</button>
        <div class="menu-modal-image">
          <img src="menu.png" alt="喫茶ブライト メニュー" />
        </div>
      </div>
    </div>

    <section>
      <h2 class="fade-in-rotate">メニュー</h2>
      <div class="menu-item fade-in-left" data-image="IMG_1962.jpg">
        <span>コーヒー</span>
        <span>400</span>
      </div>
      <div class="menu-item fade-in-right" data-image="IMG_1963.PNG">
        <span>紅茶</span>
        <span>400</span>
      </div>
      <div class="menu-item fade-in-up" data-image="IMG_1965.jpg">
        <span>ミルク</span>
        <span>400</span>
      </div>
      <div class="menu-item fade-in-left" data-image="IMG_1962.jpg">
        <span>カフェオレ</span>
        <span>400</span>
      </div>
      <div class="menu-item fade-in-right" data-image="IMG_1963.PNG">
        <span>コーラ</span>
        <span>400</span>
      </div>
      <div class="menu-item fade-in-up" data-image="IMG_1965.jpg">
        <span>カルピス</span>
        <span>400</span>
      </div>
      <div class="menu-item fade-in-left" data-image="IMG_1962.jpg">
        <span>トマトジュース</span>
        <span>400</span>
      </div>
      <div class="menu-item fade-in-right" data-image="IMG_1963.PNG">
        <span>オレンジジュース</span>
        <span>400</span>
      </div>
      <div class="menu-item fade-in-up" data-image="IMG_1965.jpg">
        <span>リンゴジュース</span>
        <span>400</span>
      </div>

      <div class="morning-service fade-in-zoom">
        <h3 class="morning-title">モーニングサービス</h3>
        <div class="morning-time">7:00〜11:00</div>
        <div class="morning-item">
          <div class="morning-name">厚切りトーストセット</div>
          <div class="morning-price">400</div>
        </div>
      </div>

      <div class="morning-image fade-in-zoom">
        <div class="menu-image-container">
          <img
            src="moning.png"
            alt="喫茶ブライト モーニングセット"
            class="menu-image"
          />
          <div class="menu-image-caption">モーニングセット</div>
          <div class="steam-1"></div>
          <div class="steam-2"></div>
        </div>
      </div>

      <h2 class="fade-in-rotate">お客様の声</h2>
      <div class="testimonial fade-in-zoom">
        <p>
          "喫茶ブライトは、私の心を落ち着けてくれる場所です。毎週のように訪れ、温かなコーヒーを楽しんでいます。マスターも温かい！"
        </p>
        <p>- 常連のお客様</p>
      </div>

      <h2 class="fade-in-rotate">お知らせ</h2>
      <p class="fade-in-left" id="news-text">
        ２０２５年７月１日　営業再開しました。長らくの休業、大変ご迷惑をおかけしました。
      </p>
    </section>

    <div class="bottom-bg-area">
      <div class="master-section">
        <img
          src="IMG_6714.jpg"
          alt="喫茶ブライト マスター"
          class="master-photo fade-in-zoom"
        />
        <div class="master-story">
          <h2 class="fade-in-rotate">マスターのご紹介</h2>
          <p class="fade-in-left">
            父の代から受け継いだ「喫茶ブライト」を、<br />
            二代目マスターとして守り続けています。<br />
            こだわりのコーヒーと、心を込めたおもてなしで、<br />
            皆さまに温かいひとときをお届けします。<br />
            ぜひお気軽にお声がけください。
          </p>
        </div>
      </div>
      <div class="shop-info">
        <h2 class="fade-in-rotate">店舗情報</h2>
        <p class="shop-address fade-in-up">大阪市都島区都島中通３−１−４</p>
        <div class="shop-map">
          <iframe
            src="https://www.google.com/maps?q=大阪市都島区都島中通３−１−４&output=embed"
            width="100%"
            height="180"
            style="border: 0; border-radius: 8px; margin-top: 6px"
            allowfullscreen=""
            loading="lazy"
            referrerpolicy="no-referrer-when-downgrade"
          >
          </iframe>
        </div>
      </div>
    </div>

    <button id="back-to-top" class="btn">トップへ戻る</button>

    <footer>
      <p>&copy; 2025 喫茶ブライト | All Rights Reserved</p>
    </footer>

    <script>
      // パーティクル背景システム
      class ParticleSystem {
        constructor() {
          this.canvas = document.getElementById("particles-bg");
          this.ctx = this.canvas.getContext("2d");
          this.particles = [];
          this.mouse = { x: 0, y: 0 };

          this.init();
          this.animate();
          this.handleMouseMove();
        }

        init() {
          this.canvas.width = window.innerWidth;
          this.canvas.height = window.innerHeight;

          // パーティクルを生成
          for (let i = 0; i < 50; i++) {
            this.particles.push({
              x: Math.random() * this.canvas.width,
              y: Math.random() * this.canvas.height,
              vx: (Math.random() - 0.5) * 0.5,
              vy: (Math.random() - 0.5) * 0.5,
              size: Math.random() * 2 + 1,
              opacity: Math.random() * 0.5 + 0.1,
            });
          }
        }

        animate() {
          this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);

          this.particles.forEach((particle) => {
            // パーティクルを更新
            particle.x += particle.vx;
            particle.y += particle.vy;

            // マウスとの距離に基づいて速度を調整
            const dx = this.mouse.x - particle.x;
            const dy = this.mouse.y - particle.y;
            const distance = Math.sqrt(dx * dx + dy * dy);

            if (distance < 100) {
              const force = (100 - distance) / 100;
              particle.vx += dx * force * 0.001;
              particle.vy += dy * force * 0.001;
            }

            // 境界チェック
            if (particle.x < 0 || particle.x > this.canvas.width)
              particle.vx *= -1;
            if (particle.y < 0 || particle.y > this.canvas.height)
              particle.vy *= -1;

            // パーティクルを描画
            this.ctx.beginPath();
            this.ctx.arc(particle.x, particle.y, particle.size, 0, Math.PI * 2);
            this.ctx.fillStyle = `rgba(192, 164, 127, ${particle.opacity})`;
            this.ctx.fill();
          });

          // パーティクル間の線を描画
          this.particles.forEach((particle, i) => {
            this.particles.slice(i + 1).forEach((otherParticle) => {
              const dx = particle.x - otherParticle.x;
              const dy = particle.y - otherParticle.y;
              const distance = Math.sqrt(dx * dx + dy * dy);

              if (distance < 80) {
                this.ctx.beginPath();
                this.ctx.moveTo(particle.x, particle.y);
                this.ctx.lineTo(otherParticle.x, otherParticle.y);
                this.ctx.strokeStyle = `rgba(192, 164, 127, ${
                  0.1 * (1 - distance / 80)
                })`;
                this.ctx.lineWidth = 1;
                this.ctx.stroke();
              }
            });
          });

          requestAnimationFrame(() => this.animate());
        }

        handleMouseMove() {
          document.addEventListener("mousemove", (e) => {
            this.mouse.x = e.clientX;
            this.mouse.y = e.clientY;
          });
        }
      }

      // パーティクルシステムを初期化
      document.addEventListener("DOMContentLoaded", () => {
        new ParticleSystem();
      });

      // モーニングセット画像の迫力アニメーション
      document.addEventListener("DOMContentLoaded", () => {
        const morningImage = document.querySelector(
          ".morning-image .menu-image-container"
        );

        const observer = new IntersectionObserver(
          (entries) => {
            entries.forEach((entry) => {
              if (entry.isIntersecting) {
                // アニメーションをリセットして再実行
                morningImage.style.animation = "none";
                morningImage.offsetHeight; // リフロー
                morningImage.style.animation =
                  "morningImageEntrance 1.2s cubic-bezier(0.23, 1, 0.32, 1) 0.2s forwards";

                // 音響効果（オプション）
                // 実際の音は追加しませんが、視覚的なインパクトを強調
                morningImage.style.filter =
                  "drop-shadow(0 0 20px rgba(192, 164, 127, 0.6))";
                setTimeout(() => {
                  morningImage.style.filter =
                    "drop-shadow(0 0 0px rgba(192, 164, 127, 0))";
                }, 1200);
              }
            });
          },
          { threshold: 0.3 }
        );

        observer.observe(morningImage);
      });

      // スクロールで.fade-in系要素をふわっと表示
      document.addEventListener("DOMContentLoaded", () => {
        const fadeEls = document.querySelectorAll(
          ".fade-in-left, .fade-in-right, .fade-in-up"
        );
        const observer = new IntersectionObserver(
          (entries) => {
            entries.forEach((entry) => {
              if (entry.isIntersecting) entry.target.classList.add("visible");
            });
          },
          { threshold: 0.2 }
        );
        fadeEls.forEach((el) => observer.observe(el));
      });

      // マスター紹介特別演出
      document.addEventListener("DOMContentLoaded", () => {
        // 写真拡大フェードイン
        const masterPhoto = document.querySelector(".master-photo");
        const masterTitle = document.querySelector(".master-story h2");
        const masterP = document.querySelector(".master-story p");
        const observer = new IntersectionObserver(
          (entries) => {
            entries.forEach((entry) => {
              if (entry.isIntersecting) {
                if (entry.target === masterPhoto)
                  masterPhoto.classList.add("visible");
                if (entry.target === masterTitle)
                  masterTitle.classList.add("visible");
                if (
                  entry.target === masterP &&
                  !masterP.classList.contains("typed")
                ) {
                  // タイピング風
                  const text = masterP.textContent;
                  masterP.textContent = "";
                  masterP.classList.add("typed");
                  [...text].forEach((char, i) => {
                    setTimeout(() => {
                      masterP.textContent += char;
                    }, 30 * i);
                  });
                }
              }
            });
          },
          { threshold: 0.2 }
        );
        observer.observe(masterPhoto);
        observer.observe(masterTitle);
        observer.observe(masterP);
      });

      // 多彩なアニメーション発火
      document.addEventListener("DOMContentLoaded", () => {
        const fadeEls = document.querySelectorAll(
          ".fade-in-left, .fade-in-right, .fade-in-up, .fade-in-zoom, .fade-in-rotate"
        );
        const observer = new IntersectionObserver(
          (entries) => {
            entries.forEach((entry) => {
              if (entry.isIntersecting) entry.target.classList.add("visible");
            });
          },
          { threshold: 0.2 }
        );
        fadeEls.forEach((el) => observer.observe(el));
      });

      // Interactive Menu Background
      document.addEventListener("DOMContentLoaded", () => {
        const menuItems = document.querySelectorAll(".menu-item");
        const bgContainer = document.querySelector(".menu-image-bg");

        menuItems.forEach((item) => {
          item.addEventListener("mouseenter", () => {
            const imageUrl = item.getAttribute("data-image");
            if (imageUrl) {
              bgContainer.style.backgroundImage = `url('${imageUrl}')`;
              bgContainer.classList.add("visible");
            }
          });
          item.addEventListener("mouseleave", () => {
            bgContainer.classList.remove("visible");
          });
        });
      });

      // Typewriter effect for news
      document.addEventListener("DOMContentLoaded", () => {
        const newsTextElement = document.getElementById("news-text");
        const text = newsTextElement.textContent;
        newsTextElement.textContent = ""; // Clear text initially

        const observer = new IntersectionObserver(
          (entries) => {
            entries.forEach((entry) => {
              if (entry.isIntersecting) {
                let i = 0;
                function typeWriter() {
                  if (i < text.length) {
                    newsTextElement.textContent += text.charAt(i);
                    i++;
                    setTimeout(typeWriter, 50);
                  }
                }
                typeWriter();
                observer.unobserve(newsTextElement); // Stop observing once typed
              }
            });
          },
          { threshold: 0.5 }
        );

        observer.observe(newsTextElement);
      });

      // Back to Top button
      document.addEventListener("DOMContentLoaded", () => {
        const backToTopButton = document.getElementById("back-to-top");

        window.addEventListener("scroll", () => {
          if (window.scrollY > 200) {
            // Show button after scrolling 200px
            backToTopButton.classList.add("show");
          } else {
            backToTopButton.classList.remove("show");
          }
        });

        backToTopButton.addEventListener("click", () => {
          window.scrollTo({ top: 0, behavior: "smooth" });
        });
      });

      // メニューモーダル機能
      document.addEventListener("DOMContentLoaded", () => {
        const menuBtn = document.getElementById("menuBtn");
        const menuModal = document.getElementById("menuModal");
        const menuModalClose = document.getElementById("menuModalClose");

        // メニューボタンをクリックしてモーダルを開く
        menuBtn.addEventListener("click", () => {
          menuModal.classList.add("active");
          document.body.style.overflow = "hidden"; // スクロールを無効化
        });

        // 閉じるボタンをクリックしてモーダルを閉じる
        menuModalClose.addEventListener("click", () => {
          menuModal.classList.remove("active");
          document.body.style.overflow = ""; // スクロールを有効化
        });

        // モーダル背景をクリックしてモーダルを閉じる
        menuModal.addEventListener("click", (e) => {
          if (e.target === menuModal) {
            menuModal.classList.remove("active");
            document.body.style.overflow = "";
          }
        });

        // ESCキーでモーダルを閉じる
        document.addEventListener("keydown", (e) => {
          if (e.key === "Escape" && menuModal.classList.contains("active")) {
            menuModal.classList.remove("active");
            document.body.style.overflow = "";
          }
        });
      });
    </script>
  </body>
</html>
